<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Master</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loading" class="loading">
        <div class="loading-spinner"></div>
        <p>Memuat...</p>
    </div>

    <!-- Error Toast -->
    <div id="errorToast" class="toast error-toast hidden">
        <span id="errorMessage"></span>
        <button onclick="hideError()" class="toast-close">√ó</button>
    </div>

    <!-- Success Toast -->
    <div id="successToast" class="toast success-toast hidden">
        <span id="successMessage"></span>
        <button onclick="hideSuccess()" class="toast-close">√ó</button>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal-overlay hidden">
        <div class="modal confirm-modal">
            <h3 id="confirmTitle">Konfirmasi</h3>
            <p id="confirmMessage">Apakah Anda yakin?</p>
            <div class="confirm-actions">
                <button id="confirmCancel" class="btn-secondary">Batal</button>
                <button id="confirmOk" class="btn-danger">Ya, Lanjutkan</button>
            </div>
        </div>
    </div>

    <!-- Landing Page -->
    <section id="landingPage" class="page active">
        <header class="header">
            <button id="adminLoginBtn" class="admin-btn" title="Login Admin">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 5.5V7H9V5.5L3 7V9L9 10.5V12L3 13.5V15.5L9 14V16L3 17.5V19.5L9 18V22H15V18L21 19.5V17.5L15 16V14L21 15.5V13.5L15 12V10.5L21 9Z"/>
                </svg>
            </button>
        </header>

        <main class="landing-main">
            <div class="landing-content">
                <div class="logo-container">
                    <div class="logo">üéØ</div>
                    <h1 class="quiz-title">Quiz Master</h1>
                </div>
                <p class="quiz-subtitle">Uji pengetahuan Anda dengan kuis interaktif yang menantang</p>
                <button id="startQuizBtn" class="btn-primary btn-large">
                    <span>Start Quiz</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </button>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">‚è±Ô∏è</div>
                        <h3>Timer</h3>
                        <p>Setiap soal memiliki waktu terbatas</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üèÜ</div>
                        <h3>Leaderboard</h3>
                        <p>Bandingkan skor dengan pemain lain</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üéØ</div>
                        <h3>Berbagai Tema</h3>
                        <p>Pilih dari berbagai kategori menarik</p>
                    </div>
                </div>
            </div>
        </main>
    </section>

    <!-- Quiz Start Page -->
    <section id="quizStartPage" class="page">
        <header class="header">
            <button id="backToLanding" class="back-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                Kembali
            </button>
            <button id="adminLoginBtn2" class="admin-btn" title="Login Admin">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 5.5V7H9V5.5L3 7V9L9 10.5V12L3 13.5V15.5L9 14V16L3 17.5V19.5L9 18V22H15V18L21 19.5V17.5L15 16V14L21 15.5V13.5L15 12V10.5L21 9Z"/>
                </svg>
            </button>
        </header>

        <main class="quiz-start-main">
            <div class="quiz-start-card">
                <div class="card-header">
                    <h2>Mulai Kuis</h2>
                    <p>Masukkan informasi Anda untuk memulai</p>
                </div>
                
                <form id="quizStartForm" class="quiz-form">
                    <div class="form-group">
                        <label for="usernameInput" class="form-label">
                            <span>Masukan username</span>
                        </label>
                        <div class="input-container">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                <circle cx="12" cy="7" r="4"/>
                            </svg>
                            <input type="text" id="usernameInput" placeholder="Username Anda" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="quizCodeInput" class="form-label">
                            <span>Kode Quiz</span>
                        </label>
                        <div class="input-container">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M15 7l-6 6 6 6"/>
                                <path d="M3 12h18"/>
                            </svg>
                            <input type="text" id="quizCodeInput" placeholder="Masukkan kode quiz yang diberikan" required class="uppercase">
                        </div>
                    </div>

                    <button type="submit" id="startBtn" class="btn-primary btn-full" disabled>
                        <span>Mulai Kuis</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </form>
            </div>
        </main>
    </section>

    <!-- Quiz Session Page -->
    <section id="quizSessionPage" class="page">
        <header class="quiz-header">
            <div class="quiz-info">
                <h2 id="quizTitle">Matematika Dasar</h2>
                <span id="quizUser">User: JohnDoe</span>
            </div>
            <div class="quiz-score">
                <div id="quizScore" class="score-value">0</div>
                <span>Skor</span>
            </div>
        </header>

        <main class="quiz-main">
            <div class="quiz-progress">
                <div class="progress-info">
                    <div id="questionProgress" class="progress-text">Soal 1 dari 10</div>
                    <div class="progress-bar">
                        <div id="progressFill" class="progress-fill"></div>
                    </div>
                </div>
                <div id="timer" class="timer">
                    <div class="timer-circle">
                        <svg class="timer-svg" viewBox="0 0 36 36">
                            <path class="timer-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                            <path id="timer-path" class="timer-path" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
                        </svg>
                        <span class="timer-text">30s</span>
                    </div>
                </div>
            </div>

            <div class="question-card">
                <h3 id="questionText">Pertanyaan akan muncul di sini...</h3>
                <div id="questionImage" class="question-image hidden">
                    <img src="" alt="Gambar soal">
                </div>
                
                <div id="mcAnswers" class="answers-container hidden">
                    <!-- Multiple choice answers will be inserted here -->
                </div>
                
                <div id="essayAnswer" class="essay-container hidden">
                    <textarea placeholder="Ketik jawaban Anda di sini..."></textarea>
                </div>
            </div>

            <div id="result" class="result-message hidden"></div>

            <div class="quiz-navigation">
                <button id="prevQuestion" class="btn-secondary">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Sebelumnya
                </button>
                <button id="submitAnswer" class="btn-primary">Submit Jawaban</button>
                <button id="nextQuestion" class="btn-primary hidden">
                    Lanjut
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </button>
            </div>
        </main>
    </section>

    <!-- Results Page -->
    <section id="resultsPage" class="page">
        <main class="results-main">
            <div class="results-card">
                <div class="results-header">
                    <h2>Hasil Kuis</h2>
                    <p>Selamat! Anda telah menyelesaikan kuis</p>
                </div>
                
                <div class="score-summary">
                    <div class="final-score">
                        <span class="score-label">Skor Akhir:</span>
                        <span id="finalScore" class="score-number">0</span>
                    </div>
                    <div class="score-breakdown">
                        <div class="breakdown-item">
                            <span class="breakdown-label">Jawaban Benar:</span>
                            <span id="correctAnswers" class="breakdown-value">0</span>
                        </div>
                        <div class="breakdown-item">
                            <span class="breakdown-label">Total Soal:</span>
                            <span id="totalQuestions" class="breakdown-value">0</span>
                        </div>
                    </div>
                    <div class="badge-info hidden" id="badgeInfo">
                        <div class="badge-icon">üéâ</div>
                        <div class="badge-text">
                            <strong>Lencana Diperoleh!</strong>
                            <span>Anda bisa mengulang 1 soal yang salah</span>
                        </div>
                    </div>
                </div>
                
                <div id="leaderboardSection" class="leaderboard-section">
                    <h3>Leaderboard Top 3</h3>
                    <div id="leaderboard" class="leaderboard">
                        <!-- Leaderboard will be inserted here -->
                    </div>
                </div>

                <div class="results-actions">
                    <button id="useBadgeBtn" class="btn-primary btn-badge hidden">
                        <span>Gunakan Lencana</span>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M12 2L15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2z"/>
                        </svg>
                    </button>
                    <button id="backToStart" class="btn-secondary">Kembali ke Awal</button>
                </div>
            </div>
        </main>
    </section>

    <!-- Badge Modal -->
    <div id="badgeModal" class="modal-overlay hidden">
        <div class="modal badge-modal">
            <div class="badge-modal-header">
                <div class="badge-modal-icon">üèÜ</div>
                <h2>Lencana Diperoleh!</h2>
            </div>
            <p>Pilih satu soal yang salah untuk diulang:</p>
            <div id="wrongQuestionsList" class="wrong-questions-list">
                <!-- Wrong questions will be inserted here -->
            </div>
            <button id="skipBadge" class="btn-secondary">Lanjut Tanpa Menggunakan</button>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal-overlay hidden">
        <div class="modal login-modal">
            <button id="closeLogin" class="modal-close">√ó</button>
            <div class="login-header">
                <h2>Login Admin</h2>
                <p>Masukkan kredensial untuk mengakses panel admin</p>
            </div>
            <form id="loginForm" class="login-form">
                <div id="loginError" class="error-message hidden"></div>
                <div class="form-group">
                    <label for="adminUsername" class="form-label">Username</label>
                    <div class="input-container">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        <input type="text" id="adminUsername" placeholder="Masukkan username" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="adminPassword" class="form-label">Password</label>
                    <div class="input-container">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                        <input type="password" id="adminPassword" placeholder="Masukkan password" required>
                    </div>
                </div>
                <button type="submit" class="btn-primary btn-full">
                    <span>Login</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M15 12H3"/>
                    </svg>
                </button>
            </form>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="modal-overlay hidden">
        <div class="admin-panel">
            <header class="admin-header">
                <div class="admin-header-content">
                    <h2>Admin Panel</h2>
                    <p>Kelola kuis dan pantau statistik</p>
                </div>
                <button id="adminLogout" class="btn-danger">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"/>
                    </svg>
                    Logout
                </button>
            </header>

            <div class="admin-tabs">
                <button id="themesTab" class="tab-button active">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10 9 9 9 8 9"/>
                    </svg>
                    Kelola Tema
                </button>
                <button id="leaderboardsTab" class="tab-button">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                    </svg>
                    Papan Ranking
                </button>
            </div>

            <div class="admin-content">
                <!-- Themes Content -->
                <div id="themesContent" class="tab-content active">
                    <div class="themes-container">
                        <div class="themes-sidebar">
                            <div class="sidebar-header">
                                <h3>Daftar Tema</h3>
                                <button id="createTheme" class="btn-success">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                        <line x1="12" y1="5" x2="12" y2="19"/>
                                        <line x1="5" y1="12" x2="19" y2="12"/>
                                    </svg>
                                    Tema Baru
                                </button>
                            </div>
                            <div id="themesList" class="themes-list">
                                <!-- Themes will be inserted here -->
                            </div>
                        </div>
                        <div class="theme-editor">
                            <div id="themeEditorPlaceholder" class="editor-placeholder">
                                <div class="placeholder-icon">üìö</div>
                                <h3>Pilih Tema untuk Diedit</h3>
                                <p>Pilih tema dari daftar di sebelah kiri atau buat tema baru</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Leaderboards Content -->
                <div id="leaderboardsContent" class="tab-content">
                    <div id="leaderboardsList" class="leaderboards-container">
                        <!-- Leaderboards will be inserted here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Question Form Modal -->
    <div id="questionFormModal" class="modal-overlay hidden">
        <div class="modal question-form-modal">
            <button id="closeQuestionForm" class="modal-close">√ó</button>
            <div class="question-form-header">
                <h2 id="questionFormTitle">Tambah Soal Baru</h2>
                <p>Isi detail soal untuk kuis Anda</p>
            </div>
            
            <form id="questionForm" class="question-form">
                <div class="form-group">
                    <label class="form-label">Tipe Soal</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="questionType" value="mc" checked>
                            <span class="radio-custom"></span>
                            Pilihan Ganda
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="questionType" value="essay">
                            <span class="radio-custom"></span>
                            Essay
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="questionText" class="form-label">Teks Soal</label>
                    <textarea 
                        id="questionText" 
                        placeholder="Masukkan teks soal..."
                        required
                        rows="4"
                    ></textarea>
                </div>

                <div class="form-group">
                    <label for="questionImage" class="form-label">URL Gambar (opsional)</label>
                    <div class="input-container">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <polyline points="21 15 16 10 5 21"/>
                        </svg>
                        <input 
                            type="url" 
                            id="questionImage" 
                            placeholder="https://example.com/image.jpg"
                        >
                    </div>
                </div>

                <!-- Multiple Choice Options -->
                <div id="mcOptions" class="mc-options">
                    <label class="form-label">Opsi Jawaban</label>
                    <div id="choicesContainer" class="choices-container">
                        <div class="choice-item">
                            <input type="radio" name="correctAnswer" value="0" checked>
                            <input type="text" placeholder="Opsi 1" class="choice-input" required>
                            <button type="button" class="btn-danger remove-choice hidden">√ó</button>
                        </div>
                        <div class="choice-item">
                            <input type="radio" name="correctAnswer" value="1">
                            <input type="text" placeholder="Opsi 2" class="choice-input" required>
                            <button type="button" class="btn-danger remove-choice hidden">√ó</button>
                        </div>
                    </div>
                    <button type="button" id="addChoice" class="btn-secondary btn-small">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <line x1="12" y1="5" x2="12" y2="19"/>
                            <line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                        Tambah Opsi
                    </button>
                </div>

                <div class="form-actions">
                    <button type="button" id="cancelQuestionForm" class="btn-secondary">Batal</button>
                    <button type="submit" class="btn-primary">Simpan Soal</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>